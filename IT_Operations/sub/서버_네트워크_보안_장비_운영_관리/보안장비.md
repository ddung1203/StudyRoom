# 보안장비 운용

## 정보보호 시스템

### 정보보호 시스템

- 훼손, 변조, 유출 방지 및 복구 : 수집/가공/저장/검색/송신/수신 중에 발생 사능한 정보
- 보안 기술 : 암호, 인증, 인식, 감시
- 관리적, 기술적, 물리적 수단

### 정보보호 시스템의 구성

- 정보보호제품(HW, SW), 기능 유지를 위한 유지 관리, 외부 위협 요인의 대비를 위해 보안성 지속 서비스
- 새로운 공격에 대비하기 위한 업데이트, 패치, 정책 반영을 끊임없이 요구

## 보안 솔루션

- 위협 요인으로부터 정보 자산을 보호하여 보안사고의 피해를 최소화하는 정책을 이용하는 기술적, 관리적 행위

## 보안 솔루션 종류

### 방화벽

#### 방화벽 구축 형태 : 베스천 호스트

- 침입 차단 시스템
- 가장 기본적으로 사용되는 솔루션
- 외부 네트워크와 내부 네트워크 사이에서 지나다니는 패킷을 미리 정한 정책/규칙에 따라 차단하거나 보내주는 기능을 하는 HW 또는 SW

베스천 호스트

- 내부 네트워크의 방화벽 형태를 PROXY(중계,대리)로 운영
- 특정 서비스에 대해서만 필터링

특징

- 내부/외부 네트워크를 분리하지 않음
- 접근제어, 프록시, 인증, 로깅 등의 방화벽 기본 기능을 수행
- 윈도우 NT또는 유닉스 등의 운영체제에 설치하여 사용
- 설치되는 운영체제에는 일반 사용자 계정이 없어야 하며, 방화벽 기능 외의 유틸리티는 모두 삭제
- 대용량의 모니터링과 로깅이 가능해야 하며, IP 포워딩 및 소스 라우팅 기능이 없어야 함

단점
- 운영체제에 운영되기 때문에 강력한 보안 정책이 가능하나 방화벽이 손상될 경우 네트워크에 대한 무조건 적인 전송이 가능 함
- 방화벽으로 원격 로그인 정보가 노출되어 공격자가 방화벽에 대한 제어권을 탈취한 경우 내부 네트워크가 위험해 짐
- 2계층 공격 등을 통한 방화벽 우회 공격에 취약

### 우분투 방화벽 설정

우분투의 기본적인 방화벽은 `UFW`이다. `iptables`를 좀 더 쉽게 설정할 수 있도록 한 것인데 간단한 방화벽 구성에는 문제가 없지만 높은 수준 방화벽 구성에는 `iptables` 룰을 직접 사용해야 한다.

#### UFW 활성화

``` bash
sudo ufw enable
```

#### UFW 비활성화

``` bash
sudo ufw disable
```

#### UFW 상태 확인

``` bash
sudo ufw status verbose
```

#### UFW 기본 룰

`UFW` 에 설정되어 있는 기본 룰은 아래와 같다.

- 들어오는 패킷에 대해서는 전부 거부(deny)
- 나가는 패킷에 대해서는 전부 허가(allow)

기본 룰 확인
``` bash
sudo ufw show raw
```

기본 정책 차단
``` bash
sudo ufw default deny
```

기본 정책 허용
``` bash
sudo ufw default allow
```

#### UFW 허용과 차단

UFW 허용/거부
``` bash
sudo ufw allow <PORT>/<OPTIONAL:PROTOCAL>
sudo ufw deny <PORT>/<OPTIONAL:PROTOCAL>
```

SSH 포트 22번 허용/거부(TCP/UDP 22번 포트를 모두 허용)
``` bash
sudo ufw allow 22
sudo ufw deny 22
```

TCP 22번 포트만을 허용/거부
``` bash
sudo ufw allow 22/tcp
sudo ufw deny 22/tcp
```

UDP 22번 포트만을 허용/거부
``` bash
sudo ufw allow 22/udp
sudo ufw deny 22/udp
```

#### UFW 룰의 삭제

UFW deny 22/tcp 설정이 되어있다고 가정 시 
``` bash
sudo ufw delete deny 22/tcp
```

### IDS(Intrusion Detection System)

- 침입 탐지 시스템
- 네트워크를 통한 공격을 탐지하기 위한 장비
- 방화벽이 차단하지 못한 해킹, 악성코드의 활동 탐지
- 설치위치에 따라 호스트기반(HIDS), 네트워크기반(NIDS)으로 나뉜다.

### IPS(Intrusion Prevention System)

- 침입 차단 시스템
- IDS + Firewall 네트워크 기반의 솔루션을 논리적으로 결합한 시스템
- 방화벽의 rule 차단은 공격에 대한 차단율이 낮다는 점을 보완하기 위해 만들어짐
- 보통 비정상적인 트래픽에 대해 능동적으로 분석하고 차단한다.

### Web filter

- 웹 브라우저의 통신내용을 감시하여 위함성 높은 내용을 차단
- 위험사이트/컨텐츠 접속 차단

### WAF(Web Application Firewall)

- 웹 방화벽
- 웹 어플리케이션과 인터넷 간의 트래픽을 필터링하고 모니터링하며 OSI 7 Layer에서 HTTP(80) 프토토콜을 베이스로하는 취약점 공격을 탐지 및 차단

### VPN(Virtual Private Network)

- 가상 사설망
- 인터넷을 전용선처럼 사용할 수 있게 함
- 본사와 자사간 전용망을 설치한것과 같은 요화
- 기존의 사설망의 고비용 부단 해소
- 터널링 + 암호화

 

### UTM(Unified Threat Management)

- 통합 위협 관리
- 하나의 장비에서 여러 보안기능을 통합적으로 제공
- 개별 장비보다는 기능이 떨어질 수 있음
- 방화벽, Web filter, WAF, VPN, IDS, IPS, ...

### NAC(Network Access Control)

- IP 관리 시스템에서 발전한 솔루션
- 네트워크에 연결된 여러 단말의 정보를 수집, 수집된 정보를 바탕으로 단말들을 분류함
- 분류한 그룹의 보안위협정도에 따라 제어 수행
- 보통 일반 PC들을 컨트롤하기 위해 만들어짐

#### 접근 제어/인증

- 내부 직원 역할 기반의 접근 제어
- 네트워크의 모든 IP 기반 장치 접근 제어

#### PC 및 네트워크 장치 통제(무결성 체크)

- 백신 관리
- 패치 관리
- 자산 관리(비인가 시스템 자동 검출)

#### 해킹, 웜, 유해 트래픽 탐지 및 차단
- 유해 트래픽 탐지 및 차단
- 해킹 행위 차단 • 완벽한 증거 수집 능력